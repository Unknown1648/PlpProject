{% extends 'partials/base2.html' %}

{%load static%}
{%block content%}


            {% if messages %}
                {% for message in  messages %}
                    <div class="alert alert-{{message.tags}}">
                        <strong>{{message}}</strong>
                    </div>
                {% endfor %}
            {% endif %}
            <script>
                setTimeout (() => {
                    $(".alert").alert("close")
                }, 3000)
            </script>

            <!-- Sale & Revenue Start -->
            <!-- <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-line fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Today Sale</p>
                                <h6 class="mb-0">$1234</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-bar fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Total Sale</p>
                                <h6 class="mb-0">$1234</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-area fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Today Revenue</p>
                                <h6 class="mb-0">$1234</h6>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                            <i class="fa fa-chart-pie fa-3x text-primary"></i>
                            <div class="ms-3">
                                <p class="mb-2">Total Revenue</p>
                                <h6 class="mb-0">$1234</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
            <!-- Sale & Revenue End -->


            <!-- Sales Chart Start -->
            <!-- <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Worldwide Sales</h6>
                                <a href="">Show All</a>
                            </div>
                            <canvas id="worldwide-sales"></canvas>
                        </div>
                    </div>
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Salse & Revenue</h6>
                                <a href="">Show All</a>
                            </div>
                            <canvas id="salse-revenue"></canvas>
                        </div>
                    </div>
                </div>
            </div> -->
            <!-- Sales Chart End -->


            <!-- Recent Sales Start -->
            <div class="container-fluid header bg-white p-0">
                <div class="row g-0 align-items-center flex-column-reverse flex-md-row">
                    <div class="col-md-6 p-5 mt-lg-5">
                        <h1 class="display-5 animated fadeIn mb-4">Find Yourself The <span class="text-primary">Perfect Place</span> To Live In</h1>
                        <p class="animated fadeIn mb-4 pb-2">Get yourself a perfect place to stay
                            at a really cheap price TODAY.</p>
                        <a href="{% url 'core:property-list' %}" class="btn btn-primary py-3 px-5 me-3 animated fadeIn">Browse Houses</a>
                    </div>
                    
                    <div class="col-sm-12 col-md-6 col-xl-4">
                        <div class="h-100 bg-light rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h6 class="mb-0">Calender</h6>
                                <a href="">Show All</a>
                            </div>
                            <div id="calender"></div>
                        </div>
                    </div>
                    <script>
                        // Calender
                        $('#calender').datetimepicker({
                            inline: true,
                            format: 'L'
                        });
                    </script>
                </div>
            </div>
            <!-- Recent Sales End -->


            <!-- Widgets Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    {% comment %} <div class="col-sm-12 col-md-6 col-xl-4">
                        <div class="h-100 bg-light rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <h6 class="mb-0">Messages</h6>
                                <a href="">Show All</a>
                            </div>
                            <div class="d-flex align-items-center border-bottom py-3">
                                <img class="rounded-circle flex-shrink-0" src="{% static 'img/user.jpg' %}" alt="" style="width: 40px; height: 40px;">
                                <div class="w-100 ms-3">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-0">Jhon Doe</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                    <span>Short message goes here...</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center border-bottom py-3">
                                <img class="rounded-circle flex-shrink-0" src="{% static 'img/user.jpg' %}" alt="" style="width: 40px; height: 40px;">
                                <div class="w-100 ms-3">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-0">Jhon Doe</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                    <span>Short message goes here...</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center border-bottom py-3">
                                <img class="rounded-circle flex-shrink-0" src="{% static 'img/user.jpg' %}" alt="" style="width: 40px; height: 40px;">
                                <div class="w-100 ms-3">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-0">Jhon Doe</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                    <span>Short message goes here...</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center pt-3">
                                <img class="rounded-circle flex-shrink-0" src="{% static 'img/user.jpg' %}" alt="" style="width: 40px; height: 40px;">
                                <div class="w-100 ms-3">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-0">Jhon Doe</h6>
                                        <small>15 minutes ago</small>
                                    </div>
                                    <span>Short message goes here...</span>
                                </div>
                            </div>
                        </div>
                    </div> {% endcomment %}
                    
                    <div class="container mt-5">
                        <div class="col-sm-12 col-md-6 col-xl-4">
                            <div class="h-100 bg-light rounded p-4">
                                <div class="d-flex align-items-center justify-content-between mb-4">
                                    <h6 class="mb-0">To Do List</h6>
                                    <a href="{% url 'core:tasks' %}">Show All</a>
                                </div>
                                <div class="d-flex mb-2">
                                    <input id="taskInput" class="form-control bg-transparent" type="text" placeholder="Enter task">
                                    <button id="addButton" type="button" class="btn btn-primary ms-2">Add</button>
                                </div>
                                <div id="taskList"></div>
                            </div>
                        </div>
                    </div>
                    <style>
                        .task-item {
                            display: flex;
                            align-items: center;
                            border-bottom: 1px solid #ddd;
                            padding: 10px 0;
                        }
                        .task-item span {
                            flex-grow: 1;
                        }
                        .completed {
                            text-decoration: line-through;
                            color: gray;
                        }
                    </style>
                    <script>
                        const addButton = document.getElementById('addButton');
                        const taskInput = document.getElementById('taskInput');
                        const taskList = document.getElementById('taskList');
                    
                        // Load tasks from local storage
                        function loadTasks() {
                            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
                            // Show only the first three tasks
                            tasks.slice(0, 3).forEach(task => addTaskToDOM(task.text, task.checked));
                        }
                    
                        // Save tasks to local storage
                        function saveTasks() {
                            const tasks = [];
                            document.querySelectorAll('.task-item').forEach(item => {
                                tasks.push({
                                    text: item.querySelector('span').textContent,
                                    checked: item.querySelector('input[type="checkbox"]').checked
                                });
                            });
                            localStorage.setItem('tasks', JSON.stringify(tasks));
                        }
                    
                        // Add task to DOM
                        function addTaskToDOM(taskText, checked = false) {
                            const taskItem = document.createElement('div');
                            taskItem.classList.add('task-item');
                    
                            // Create checkbox
                            const checkbox = document.createElement('input');
                            checkbox.type = 'checkbox';
                            checkbox.classList.add('form-check-input', 'm-0');
                            checkbox.checked = checked;
                    
                            // Add event listener for checkbox
                            checkbox.addEventListener('change', function() {
                                taskSpan.classList.toggle('completed', checkbox.checked);
                                saveTasks();
                            });
                    
                            // Create task text
                            const taskSpan = document.createElement('span');
                            taskSpan.textContent = taskText;
                            if (checked) {
                                taskSpan.classList.add('completed'); // Apply strikethrough if task is checked
                            }
                    
                            // Create delete button
                            const deleteButton = document.createElement('button');
                            deleteButton.classList.add('btn', 'btn-sm');
                            deleteButton.innerHTML = '<i class="fa fa-times"></i>';
                            deleteButton.addEventListener('click', function() {
                                taskList.removeChild(taskItem);
                                saveTasks(); // Update local storage after deletion
                            });
                    
                            // Append elements to task item
                            taskItem.appendChild(checkbox);
                            taskItem.appendChild(taskSpan);
                            taskItem.appendChild(deleteButton);
                    
                            // Append task item to task list
                            taskList.appendChild(taskItem);
                        }
                    
                        addButton.addEventListener('click', function() {
                            const taskText = taskInput.value.trim();
                    
                            // Validate input
                            if (taskText === '') {
                                alert('Please enter a valid task.');
                                return;
                            }
                    
                            // Save task to local storage
                            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
                            tasks.push({ text: taskText, checked: false });
                            localStorage.setItem('tasks', JSON.stringify(tasks));
                    
                            // Add task to DOM
                            addTaskToDOM(taskText);
                            taskInput.value = ''; // Clear input
                        });
                    
                        // Load tasks on page load
                        loadTasks();
                    </script>
                    
            </div>
            <!-- Widgets End -->


{% endblock content %}